{
  "core_docs": {
    "core/system-architecture.md": {
      "min_words": 1200,
      "max_words": 1800,
      "max_bullet_ratio": 0.20,
      "required_sections": [
        "System Objective",
        "End-to-End Causal Flow",
        "Architectural Invariants",
        "Failure and Recovery Model",
        "Performance Envelope",
        "Design Pressure and Rejected Alternatives",
        "Operator Implications"
      ]
    },
    "core/ingestion-service.md": {
      "min_words": 1200,
      "max_words": 1800,
      "max_bullet_ratio": 0.20,
      "required_sections": [
        "Runtime Responsibility",
        "Execution Model",
        "Checkpoint and File Identity Semantics",
        "Normalization Contract",
        "Sink, Flush, and Durability Semantics",
        "Backpressure and Scheduling Under Load",
        "Failure Modes and Recovery Behavior",
        "Tuning and Extension Guidance"
      ]
    },
    "core/data-model.md": {
      "min_words": 1200,
      "max_words": 1800,
      "max_bullet_ratio": 0.20,
      "required_sections": [
        "Modeling Goals",
        "Canonical Event Tables",
        "View Layer and Trace Semantics",
        "Search Index Tables and Maintenance",
        "Engine Choices and Their Consequences",
        "Reconstruction Walkthrough",
        "Schema Evolution Guidance"
      ]
    },
    "search/indexing-and-retrieval.md": {
      "min_words": 1200,
      "max_words": 1800,
      "max_bullet_ratio": 0.20,
      "required_sections": [
        "Retrieval Objective",
        "Index Construction in ClickHouse",
        "Query Processing in `codex-mcp`",
        "BM25 Formula and SQL Realization",
        "Retrieval Policy Filters",
        "Freshness and Rebuild Behavior",
        "Query and Interaction Logging",
        "Known Limits"
      ]
    },
    "mcp/agent-interface.md": {
      "min_words": 1000,
      "max_words": 1700,
      "max_bullet_ratio": 0.20,
      "required_sections": [
        "Service Contract",
        "JSON-RPC Session Lifecycle",
        "Tool Definitions and Input Schemas",
        "Search Tool Execution Semantics",
        "Open Tool Execution Semantics",
        "Response Shapes and Verbosity",
        "Safety and Failure Semantics",
        "Integration Guidance for Agents"
      ]
    },
    "architecture/design-tradeoffs.md": {
      "min_words": 1200,
      "max_words": 1800,
      "max_bullet_ratio": 0.20,
      "required_sections": [
        "Decision Context",
        "ADR-001: Local ClickHouse as the System Database",
        "ADR-002: Rust-Only Ingestion Runtime",
        "ADR-003: Event Watcher Plus Reconcile Scanner",
        "ADR-004: Preserve Raw Payloads and Source Coordinates",
        "ADR-005: At-Least-Once Ingest with Replacing Semantics",
        "ADR-006: Incremental Sparse Indexing in ClickHouse",
        "ADR-007: Retrieval Defaults Favor Signal Over Completeness",
        "ADR-008: Query and Hit Logging as First-Class Tables"
      ]
    }
  },
  "global": {
    "min_citations_per_250_words": 1,
    "max_bullet_ratio_non_core": 0.35,
    "min_prose_words_per_section": 80,
    "max_bullets_without_prose": 3,
    "citation_pattern": "[src: path:Lstart[-Lend]]"
  },
  "terminology": {
    "required_terms": {
      "core/system-architecture.md": ["ReplacingMergeTree", "v_conversation_trace", "search_postings", "ingest_checkpoints"],
      "core/ingestion-service.md": ["pending", "inflight", "dirty", "source_generation", "normalize_record"],
      "core/data-model.md": ["search_documents", "search_postings", "v_all_events", "SummingMergeTree"],
      "search/indexing-and-retrieval.md": ["k1", "b", "avgdl", "min_should_match"],
      "mcp/agent-interface.md": ["tools/list", "tools/call", "verbosity", "query_json_rows", "search_query_log"],
      "architecture/design-tradeoffs.md": ["at-least-once", "materialized view", "local", "trace fidelity"]
    },
    "banned_phrases": [
      "robust and scalable",
      "best-in-class",
      "industry-leading"
    ]
  }
}
